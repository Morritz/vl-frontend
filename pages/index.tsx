import type { NextPage } from "next";
import Head from "next/head";
import { PokemonEntry, PokemonEntryProps } from "../components/PokemonEntry";
import { queryPokemons } from "../queries/pokemonQuery";

interface HomeProps {
  pokemons: PokemonEntryProps[];
}
const Home: NextPage<HomeProps> = ({ pokemons }) => {
  return (
    <>
      <Head>
        <title>PokeApp</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      {pokemons.length > 0 ? (
        pokemons.map((pokemon) => {
          return <PokemonEntry {...pokemon} />;
        })
      ) : (
        <p className="text-center text-2xl">
          Unfortunately, we could not provide you with pokemons.
          <br />
          Try again later.
          <br />
          ðŸ˜”
        </p>
      )}
    </>
  );
};

export async function getServerSideProps() {
  return { props: { pokemons: await queryPokemons() } };
}

export default Home;
